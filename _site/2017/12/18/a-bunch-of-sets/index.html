<!doctype html>
<html lang="en-US">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <title>Ben Rodenhäuser | Notes on programming</title>

  <link href="https://fonts.googleapis.com/css?family=Lato|Anton|Roboto Mono" rel="stylesheet">
  <link rel="stylesheet" href="/assets/css/main.css?v=">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    CommonHTML: { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
           SVG: { linebreaks: { automatic: true } }
  });
  </script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML&delayStartupUntilConfig">
  </script>
  <script src="/assets/jax/config.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-99334571-1', 'auto');
        ga('send', 'pageview');
    </script>
  
</head>

  <body>
    <div class="wrapper">
      <section>
  <p>
    <small>
      18 December 2017
    </small>
  </p>

  <h1 class="title">
    A Bunch of Sets
  </h1>

  <div class="description">
    A generic implementation of classical sets, multisets and fuzzy sets in Ruby.
  </div>

  <div class="content">
    <hr class="line" />
    <div class="content-inner">
      <p>Ruby comes with a <a href="https://github.com/ruby/ruby/blob/trunk/lib/set.rb"><code class="highlighter-rouge">Set</code> class</a> as part of its standard library, and there is also a <a href="https://github.com/maraigue/multiset/blob/master/lib/multiset.rb"><code class="highlighter-rouge">Multiset</code> class</a> available as a gem. Both classes uses hashes internally. However, the two libraries are completely separate, so, of course, they do not share any code. This is somewhat regrettable, since—as we will see during the course of our discussion—sets and multisets have quite a bit in common. For this reason, I thought that it would be a nice exercise to write a more generic set class from scratch that would allow us to derive the functionality provided by the above-mentioned classes by inheritance. For good measure, I decided to throw fuzzy sets into the mix, another type of set with useful applications. The result could be called a polymorphic approach to modeling various types of sets in Ruby. This series of posts is a tutorial-style presentation of what I came up with. If you don’t care much for lengthy explanations, head <a href="https://github.com/benrodenhaeuser/sets">straight to Github</a> to have a look at the code.</p>

<p>The series has three parts:</p>

<ul>
  <li>This part introduces our topic by discussing the three types of sets we would like to capture.</li>
  <li><a href="/2017/12/19/modeling-sets/">Part 02</a> develops a unified model for those types of sets.</li>
  <li><a href="/2017/12/20/operations-on-sets/">Part 03</a> discusses how to implement the typical operations on sets in this model.</li>
</ul>

<h2 id="classical-sets-multisets-and-fuzzy-sets">Classical sets, multisets, and fuzzy sets</h2>

<p>Let’s first get an overview of the types of collections we are interested in by means of some quick examples.</p>

<h3 id="classical-sets">Classical Sets</h3>

<p>Supppose we wanted to concisely represent the letters occuring in a word, while disregarding their sequential order as well as the number of times they occur in the word. A classical set would be a good choice of data structure for this task. For instance, the word “learner” could be represented by the set</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a,</span><span class="w"> </span><span class="err">e,</span><span class="w"> </span><span class="err">l,</span><span class="w"> </span><span class="err">r,</span><span class="w"> </span><span class="err">n</span><span class="w"> </span><span class="p">}</span></code>.</p>
</blockquote>

<p>The word “learn” corresponds to the same classical set, as it contains the same letters. The word “land”, on the other hand, corresponds to the set</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a,</span><span class="w"> </span><span class="err">l,</span><span class="w"> </span><span class="err">n,</span><span class="w"> </span><span class="err">d</span><span class="w"> </span><span class="p">}</span></code>.</p>
</blockquote>

<p>Taking the intersection of the two sets, which collects the elements occuring in both of them, we obtain the set <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a,</span><span class="w"> </span><span class="err">l,</span><span class="w"> </span><span class="err">n</span><span class="w"> </span><span class="p">}</span></code>, which captures the overlap of the two words in terms of letters contained—a crude measure of what they have in common. So sets allow us to zoom in on questions of membership, while disregarding other aspects of particular entities we wish to study.</p>

<h3 id="multisets">Multisets</h3>

<p>Suppose now we would like to count <em>how often</em> letters occur in a given word or text, while (still) disregarding their order. A multiset would be an appropriate data structure to accomplish this. For example, the above word “learner” corresponds to the multiset</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a,</span><span class="w"> </span><span class="err">e,</span><span class="w"> </span><span class="err">e,</span><span class="w"> </span><span class="err">l,</span><span class="w"> </span><span class="err">r,</span><span class="w"> </span><span class="err">r,</span><span class="w"> </span><span class="err">n</span><span class="w"> </span><span class="p">}</span></code>.</p>
</blockquote>

<p>Notice that the word “learn” would be represented by a different multiset, namely</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a,</span><span class="w"> </span><span class="err">e,</span><span class="w"> </span><span class="err">l,</span><span class="w"> </span><span class="err">r,</span><span class="w"> </span><span class="err">n</span><span class="w"> </span><span class="p">}</span></code>.</p>
</blockquote>

<p>So multisets make finer distinctions than classical sets.</p>

<p>A more concise way to represent a multiset is by means of key-value notation. In this notation, our multiset representation of the word “learner” would be written as</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">a:</span><span class="w"> </span><span class="err">1,</span><span class="w"> </span><span class="err">e:</span><span class="w"> </span><span class="err">2,</span><span class="w"> </span><span class="err">l:</span><span class="w"> </span><span class="err">1,</span><span class="w"> </span><span class="err">r:</span><span class="w"> </span><span class="err">2,</span><span class="w"> </span><span class="err">n:</span><span class="w"> </span><span class="err">1</span><span class="w"> </span><span class="p">}</span></code></p>
</blockquote>

<p>In a programming context, the elements of a set (be it a classical set or a multiset) are often called <em>keys</em>. The above multiset has five distinct keys: “a”, “e”, “l”, “r” and “n”. In a multiset, each key comes with a count, the value associated with the key, which we will refer to as the <em>score</em> for that key. The score for the key “e” in the above multiset, for example, is 2.</p>

<h3 id="fuzzy-sets">Fuzzy sets</h3>

<p>Fuzzy sets also make finer distinctions compared to classical sets. However, they generalize classical sets in a different direction. As we just saw, in a multiset, the score for a particular key represents <em>multiplicity</em> of membership (how many times does the key occur in the set?). In a fuzzy set, the score indicates <em>degree of membership</em>. So besides an element being “fully contained” in the set or “not contained”, it may also be “partially contained” in the set, so to speak.</p>

<p>To see how this can be useful, take this example: consider the words “learner”, “learn”, “learned”, and “lean”. We might wish to capture how similar each of these words is to some other word, let’s say the word “learner” again. The similarity of “learner” to itself is perfect, since no edit (letter change) is required to transform one into the other. They are the same, after all. On to the more interesting cases: the word “learned” is very similar to “learner” – substituting the last letter will transform the former into the latter. “learn” is also very similar to “learner”, but a little less so – deleting the last two letters from “learner” results in “learner”, requiring two steps rather than one. The word “lean” is again a bit less similar to “learner”, requiring one additional deletion. So to transform each of the words given into “learner” requires:</p>

<ul>
  <li>“learner”: 0 edits</li>
  <li>“learned”: 1 edit</li>
  <li>“learn”: 2 edits</li>
  <li>“lean”: 3 edits</li>
</ul>

<p>For the sake of exposition, let us settle on 3 as the—pretty arbitrarily chosen—treshold from which onwards two words to be considered completely dissimilar, or “not similar at all”. Then we can map our edit counts to a scale from 0 to 1, and represent our findings as a fuzzy set which scores the key “learner” with 1.0, “learned” with 0.66, “learn” with 0.33 and “lean” with 0.0, or, using key-value notation:</p>

<blockquote>
  <p><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">learner:</span><span class="w"> </span><span class="err">1.0,</span><span class="w"> </span><span class="err">learned:</span><span class="w"> </span><span class="err">0.66,</span><span class="w"> </span><span class="err">learn:</span><span class="w"> </span><span class="err">0.33,</span><span class="w"> </span><span class="err">lean:</span><span class="w"> </span><span class="err">0.0</span><span class="w"> </span><span class="p">}</span></code></p>
</blockquote>

<p>In this fuzzy set, the degree of each element is to be interpreted as the degree of similarity to our target word “learner”.</p>

<blockquote class="aside">
  <p>Continue to <a href="/2017/12/19/modeling-sets/">part 02 of the series</a> where we start to put our model of sets in place.</p>
</blockquote>

    </div>
  </div>

  <p class='terminal'>
    <small>&nbsp;</small>
  </p>
  <hr class="line" />
</section>

      <header>
  <p>
    <small>&nbsp;</small>
  </p>
  <a href="http://notes.benrodenhaeuser.io">
    <h1 class="title">
      Ben Rodenhäuser
    </h1>
  </a>

  <div class="description site-description">
    Notes on programming
  </div>

  <div class="content">
    <hr class="line" />

    <div class="sidebar-content">
      
      <h5>
        <a class="post-link" href="/2018/06/04/frankie-likes-cookies/">Frankie Likes Cookies</a><span class="sidebar-pad"></span><small>06/04/18</small>
      </h5>
      <p class="sidebar">
          Working with Rack middleware: part 04 of the "Sinatra From Scratch" series.
      </p>
      
      <h5>
        <a class="post-link" href="/2018/06/03/frankie-sees-a-pattern/">Frankie Sees a Pattern</a><span class="sidebar-pad"></span><small>06/03/18</small>
      </h5>
      <p class="sidebar">
          Defining parametrized routes: part 03 of the "Sinatra From Scratch" series.
      </p>
      
      <h5>
        <a class="post-link" href="/2018/06/02/frankie-reaches-for-the-top/">Frankie Reaches for the Top (Level)</a><span class="sidebar-pad"></span><small>06/02/18</small>
      </h5>
      <p class="sidebar">
          The top-level DSL: part 02 of the "Sinatra From Scratch" series.
      </p>
      
      <h5>
        <a class="post-link" href="/2018/06/01/sinatra-from-scratch/">Sinatra From Scratch</a><span class="sidebar-pad"></span><small>06/01/18</small>
      </h5>
      <p class="sidebar">
          Building a toy version of a Ruby web framework from the ground up.
      </p>
      
      <h5>
        <a class="post-link" href="/2017/12/20/operations-on-sets/">Operations on Sets</a><span class="sidebar-pad"></span><small>12/20/17</small>
      </h5>
      <p class="sidebar">
          Part 03 of the "Bunch of Sets" series.
      </p>
      
      <h5>
        <a class="post-link" href="/2017/12/19/modeling-sets/">Modeling Sets</a><span class="sidebar-pad"></span><small>12/19/17</small>
      </h5>
      <p class="sidebar">
          Part 02 of the "Bunch of Sets" series.
      </p>
      
      <h5>
        <a class="post-link" href="/2017/12/18/a-bunch-of-sets/">A Bunch of Sets</a><span class="sidebar-pad"></span><small>12/18/17</small>
      </h5>
      <p class="sidebar">
          A generic implementation of classical sets, multisets and fuzzy sets in Ruby.
      </p>
      
      <h5>
        <a class="post-link" href="/2017/07/06/object-passing/">Passing Objects</a><span class="sidebar-pad"></span><small>07/06/17</small>
      </h5>
      <p class="sidebar">
          Pass by reference or pass by value? The object passing strategy followed by Ruby.
      </p>
      
      <h5>
        <a class="post-link" href="/2017/05/15/sorting-in-ruby/">Sorting in Ruby</a><span class="sidebar-pad"></span><small>05/15/17</small>
      </h5>
      <p class="sidebar">
          Why does Ruby have two sorting methods, rather than one?
      </p>
      
    </div>

    <hr class="line" />

    <div class="external">
      <a href="http://github.com/benrodenhaeuser">
        <img class="mark" src="/assets/images/GitHub-Mark-64px.png" />
      </a>
    </div>
  </div>
</header>

      <!-- <footer>
  <p><small>Ben Rodenhäuser 2017 | <a href="http://github.com/benrodenhaeuser">GitHub Profile</a></small></p>
</footer> -->

    </div>
    <script src="/assets/js/scale.fix.js"></script>
  </body>
</html>
  

